{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/anshul/Masters/Internship/POC/Meteor_Mobile/mieweb_push_auth/imports/ui/Login.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"imports/ui/Login.jsx","filename":"/Users/anshul/Masters/Internship/POC/Meteor_Mobile/mieweb_push_auth/imports/ui/Login.jsx","inputSourceMap":{"version":3,"names":["React","useState","useEffect","useNavigate","FiMail","FiLock","Meteor","Session","LoginPage","deviceDetails","_s","email","setEmail","pin","setPin","error","setError","isLoggingIn","setIsLoggingIn","navigate","console","warn","connectionCheck","setInterval","status","connected","includes","clearInterval","handleLogin","e","preventDefault","Promise","resolve","reject","loginWithPassword","err","set","reason","target","value","_c","$RefreshReg$"],"sources":["imports/ui/Login.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FiMail, FiLock } from 'react-icons/fi';\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nexport const LoginPage = ({ deviceDetails }) => {\n  const [email, setEmail] = useState('');\n  const [pin, setPin] = useState('');\n  const [error, setError] = useState('');\n  const [isLoggingIn, setIsLoggingIn] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Check for device details on component mount\n    if (!deviceDetails) {\n      console.warn('No device details available');\n    }\n\n    // Check for Meteor connection\n    const connectionCheck = setInterval(() => {\n      if (!Meteor.status().connected) {\n        setError('Connection to server lost. Attempting to reconnect...');\n      } else if (error.includes('Connection to server lost')) {\n        setError('');\n      }\n    }, 3000);\n\n    return () => clearInterval(connectionCheck);\n  }, [deviceDetails, error]);\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    \n    // Validate device details\n    if (!deviceDetails) {\n      setError('Device information not available. Please refresh the page.');\n      return;\n    }\n\n    // Validate connection\n    if (!Meteor.status().connected) {\n      setError('Unable to connect to server. Please check your connection.');\n      return;\n    }\n\n    setIsLoggingIn(true);\n    setError('');\n\n    try {\n      await new Promise((resolve, reject) => {\n        Meteor.loginWithPassword(email, pin, (err) => {\n          if (err) {\n            console.error('Login Error:', err);\n            reject(err);\n          } else {\n            resolve();\n          }\n        });\n      });\n      Session.set('userProfile', {\n        email: email,\n      });\n\n      navigate('/dashboard');\n\n      \n    } catch (err) {\n      setError(err.reason || 'Login failed. Please try again.');\n    } finally {\n      setIsLoggingIn(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-50\">\n      <div className=\"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-lg\">\n        <div className=\"text-center\">\n          <h2 className=\"text-3xl font-bold text-gray-900\">Welcome Back</h2>\n          <p className=\"mt-2 text-gray-600\">Sign in to your account</p>\n        </div>\n\n        <form onSubmit={handleLogin} className=\"space-y-6\">\n          {error && (\n            <div className=\"text-red-600 text-sm text-center bg-red-100 p-3 rounded-lg\">\n              {error}\n            </div>\n          )}\n\n          <div>\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\n              Email\n            </label>\n            <div className=\"mt-1 relative\">\n              <FiMail className=\"absolute top-3 left-3 text-gray-400\" />\n              <input\n                id=\"email\"\n                type=\"email\"\n                required\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                placeholder=\"Enter your email\"\n                autoComplete=\"email\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label htmlFor=\"pin\" className=\"block text-sm font-medium text-gray-700\">\n              PIN\n            </label>\n            <div className=\"mt-1 relative\">\n              <FiLock className=\"absolute top-3 left-3 text-gray-400\" />\n              <input\n                id=\"pin\"\n                type=\"password\"\n                required\n                value={pin}\n                onChange={(e) => setPin(e.target.value)}\n                className=\"w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                placeholder=\"Enter your PIN\"\n                maxLength={6}\n                minLength={4}\n                pattern=\"[0-9]*\"\n                inputMode=\"numeric\"\n                autoComplete=\"current-password\"\n              />\n            </div>\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={isLoggingIn}\n            className=\"w-full py-3 px-4 rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 ease-in-out transform hover:scale-[1.02]\"\n          >\n            {isLoggingIn ? (\n              <div className=\"flex items-center justify-center\">\n                <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                </svg>\n                Signing In...\n              </div>\n            ) : (\n              'Sign In'\n            )}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/anshul/Masters/Internship/POC/Meteor_Mobile/mieweb_push_auth","root":"/Users/anshul/Masters/Internship/POC/Meteor_Mobile/mieweb_push_auth","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]}},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/anshul/Masters/Internship/POC/Meteor_Mobile/mieweb_push_auth/imports/ui/Login.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/Login.jsx","inputSourceMap":{"version":3,"names":["React","useState","useEffect","useNavigate","FiMail","FiLock","Meteor","Session","LoginPage","deviceDetails","_s","email","setEmail","pin","setPin","error","setError","isLoggingIn","setIsLoggingIn","navigate","console","warn","connectionCheck","setInterval","status","connected","includes","clearInterval","handleLogin","e","preventDefault","Promise","resolve","reject","loginWithPassword","err","set","reason","target","value","_c","$RefreshReg$"],"sources":["imports/ui/Login.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FiMail, FiLock } from 'react-icons/fi';\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nexport const LoginPage = ({ deviceDetails }) => {\n  const [email, setEmail] = useState('');\n  const [pin, setPin] = useState('');\n  const [error, setError] = useState('');\n  const [isLoggingIn, setIsLoggingIn] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Check for device details on component mount\n    if (!deviceDetails) {\n      console.warn('No device details available');\n    }\n\n    // Check for Meteor connection\n    const connectionCheck = setInterval(() => {\n      if (!Meteor.status().connected) {\n        setError('Connection to server lost. Attempting to reconnect...');\n      } else if (error.includes('Connection to server lost')) {\n        setError('');\n      }\n    }, 3000);\n\n    return () => clearInterval(connectionCheck);\n  }, [deviceDetails, error]);\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    \n    // Validate device details\n    if (!deviceDetails) {\n      setError('Device information not available. Please refresh the page.');\n      return;\n    }\n\n    // Validate connection\n    if (!Meteor.status().connected) {\n      setError('Unable to connect to server. Please check your connection.');\n      return;\n    }\n\n    setIsLoggingIn(true);\n    setError('');\n\n    try {\n      await new Promise((resolve, reject) => {\n        Meteor.loginWithPassword(email, pin, (err) => {\n          if (err) {\n            console.error('Login Error:', err);\n            reject(err);\n          } else {\n            resolve();\n          }\n        });\n      });\n      Session.set('userProfile', {\n        email: email,\n      });\n\n      navigate('/dashboard');\n\n      \n    } catch (err) {\n      setError(err.reason || 'Login failed. Please try again.');\n    } finally {\n      setIsLoggingIn(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-50\">\n      <div className=\"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-lg\">\n        <div className=\"text-center\">\n          <h2 className=\"text-3xl font-bold text-gray-900\">Welcome Back</h2>\n          <p className=\"mt-2 text-gray-600\">Sign in to your account</p>\n        </div>\n\n        <form onSubmit={handleLogin} className=\"space-y-6\">\n          {error && (\n            <div className=\"text-red-600 text-sm text-center bg-red-100 p-3 rounded-lg\">\n              {error}\n            </div>\n          )}\n\n          <div>\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\n              Email\n            </label>\n            <div className=\"mt-1 relative\">\n              <FiMail className=\"absolute top-3 left-3 text-gray-400\" />\n              <input\n                id=\"email\"\n                type=\"email\"\n                required\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                placeholder=\"Enter your email\"\n                autoComplete=\"email\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label htmlFor=\"pin\" className=\"block text-sm font-medium text-gray-700\">\n              PIN\n            </label>\n            <div className=\"mt-1 relative\">\n              <FiLock className=\"absolute top-3 left-3 text-gray-400\" />\n              <input\n                id=\"pin\"\n                type=\"password\"\n                required\n                value={pin}\n                onChange={(e) => setPin(e.target.value)}\n                className=\"w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                placeholder=\"Enter your PIN\"\n                maxLength={6}\n                minLength={4}\n                pattern=\"[0-9]*\"\n                inputMode=\"numeric\"\n                autoComplete=\"current-password\"\n              />\n            </div>\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={isLoggingIn}\n            className=\"w-full py-3 px-4 rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 ease-in-out transform hover:scale-[1.02]\"\n          >\n            {isLoggingIn ? (\n              <div className=\"flex items-center justify-center\">\n                <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                </svg>\n                Signing In...\n              </div>\n            ) : (\n              'Sign In'\n            )}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]}}},"code":"!function (module1) {\n  var _regeneratorRuntime;\n  module1.link(\"@babel/runtime/regenerator\", {\n    default: function (v) {\n      _regeneratorRuntime = v;\n    }\n  }, 0);\n  var _slicedToArray;\n  module1.link(\"@babel/runtime/helpers/slicedToArray\", {\n    default: function (v) {\n      _slicedToArray = v;\n    }\n  }, 1);\n  module1.export({\n    LoginPage: function () {\n      return LoginPage;\n    }\n  });\n  var React, useState, useEffect;\n  module1.link(\"react\", {\n    \"default\": function (v) {\n      React = v;\n    },\n    useState: function (v) {\n      useState = v;\n    },\n    useEffect: function (v) {\n      useEffect = v;\n    }\n  }, 0);\n  var useNavigate;\n  module1.link(\"react-router-dom\", {\n    useNavigate: function (v) {\n      useNavigate = v;\n    }\n  }, 1);\n  var FiMail, FiLock;\n  module1.link(\"react-icons/fi\", {\n    FiMail: function (v) {\n      FiMail = v;\n    },\n    FiLock: function (v) {\n      FiLock = v;\n    }\n  }, 2);\n  var Meteor;\n  module1.link(\"meteor/meteor\", {\n    Meteor: function (v) {\n      Meteor = v;\n    }\n  }, 3);\n  var Session;\n  module1.link(\"meteor/session\", {\n    Session: function (v) {\n      Session = v;\n    }\n  }, 4);\n  ___INIT_METEOR_FAST_REFRESH(module);\n  var _s = $RefreshSig$();\n  var LoginPage = function (_ref) {\n    var deviceDetails = _ref.deviceDetails;\n    _s();\n    var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n    var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pin = _useState4[0],\n      setPin = _useState4[1];\n    var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      error = _useState6[0],\n      setError = _useState6[1];\n    var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isLoggingIn = _useState8[0],\n      setIsLoggingIn = _useState8[1];\n    var navigate = useNavigate();\n    useEffect(function () {\n      // Check for device details on component mount\n      if (!deviceDetails) {\n        console.warn('No device details available');\n      }\n\n      // Check for Meteor connection\n      var connectionCheck = setInterval(function () {\n        if (!Meteor.status().connected) {\n          setError('Connection to server lost. Attempting to reconnect...');\n        } else if (error.includes('Connection to server lost')) {\n          setError('');\n        }\n      }, 3000);\n      return function () {\n        return clearInterval(connectionCheck);\n      };\n    }, [deviceDetails, error]);\n    var handleLogin = function () {\n      function _callee(e) {\n        return _regeneratorRuntime.async(function () {\n          function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n\n                // Validate device details\n                if (deviceDetails) {\n                  _context.next = 4;\n                  break;\n                }\n                setError('Device information not available. Please refresh the page.');\n                return _context.abrupt(\"return\");\n              case 4:\n                if (Meteor.status().connected) {\n                  _context.next = 7;\n                  break;\n                }\n                setError('Unable to connect to server. Please check your connection.');\n                return _context.abrupt(\"return\");\n              case 7:\n                setIsLoggingIn(true);\n                setError('');\n                _context.prev = 9;\n                _context.next = 12;\n                return _regeneratorRuntime.awrap(new Promise(function (resolve, reject) {\n                  Meteor.loginWithPassword(email, pin, function (err) {\n                    if (err) {\n                      console.error('Login Error:', err);\n                      reject(err);\n                    } else {\n                      resolve();\n                    }\n                  });\n                }));\n              case 12:\n                Session.set('userProfile', {\n                  email: email\n                });\n                navigate('/dashboard');\n                _context.next = 19;\n                break;\n              case 16:\n                _context.prev = 16;\n                _context.t0 = _context[\"catch\"](9);\n                setError(_context.t0.reason || 'Login failed. Please try again.');\n              case 19:\n                _context.prev = 19;\n                setIsLoggingIn(false);\n                return _context.finish(19);\n              case 22:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n          return _callee$;\n        }(), null, null, [[9, 16, 19, 22]], Promise);\n      }\n      return _callee;\n    }();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-50\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-lg\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\"\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"text-3xl font-bold text-gray-900\"\n    }, \"Welcome Back\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"mt-2 text-gray-600\"\n    }, \"Sign in to your account\")), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleLogin,\n      className: \"space-y-6\"\n    }, error && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-red-600 text-sm text-center bg-red-100 p-3 rounded-lg\"\n    }, error), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"email\",\n      className: \"block text-sm font-medium text-gray-700\"\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mt-1 relative\"\n    }, /*#__PURE__*/React.createElement(FiMail, {\n      className: \"absolute top-3 left-3 text-gray-400\"\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"email\",\n      type: \"email\",\n      required: true,\n      value: email,\n      onChange: function (e) {\n        return setEmail(e.target.value);\n      },\n      className: \"w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",\n      placeholder: \"Enter your email\",\n      autoComplete: \"email\"\n    }))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"pin\",\n      className: \"block text-sm font-medium text-gray-700\"\n    }, \"PIN\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mt-1 relative\"\n    }, /*#__PURE__*/React.createElement(FiLock, {\n      className: \"absolute top-3 left-3 text-gray-400\"\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"pin\",\n      type: \"password\",\n      required: true,\n      value: pin,\n      onChange: function (e) {\n        return setPin(e.target.value);\n      },\n      className: \"w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",\n      placeholder: \"Enter your PIN\",\n      maxLength: 6,\n      minLength: 4,\n      pattern: \"[0-9]*\",\n      inputMode: \"numeric\",\n      autoComplete: \"current-password\"\n    }))), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      disabled: isLoggingIn,\n      className: \"w-full py-3 px-4 rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 ease-in-out transform hover:scale-[1.02]\"\n    }, isLoggingIn ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex items-center justify-center\"\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      className: \"animate-spin -ml-1 mr-3 h-5 w-5 text-white\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      fill: \"none\",\n      viewBox: \"0 0 24 24\"\n    }, /*#__PURE__*/React.createElement(\"circle\", {\n      className: \"opacity-25\",\n      cx: \"12\",\n      cy: \"12\",\n      r: \"10\",\n      stroke: \"currentColor\",\n      strokeWidth: \"4\"\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      className: \"opacity-75\",\n      fill: \"currentColor\",\n      d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n    })), \"Signing In...\") : 'Sign In'))));\n  };\n  _s(LoginPage, \"MtfjbUFJrqs2dfV48S4oXboFhcY=\", false, function () {\n    return [useNavigate];\n  });\n  _c = LoginPage;\n  var _c;\n  $RefreshReg$(_c, \"LoginPage\");\n}.call(this, module);","map":{"version":3,"names":["LoginPage","_ref","deviceDetails","_s","_useState","useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","pin","setPin","_useState5","_useState6","error","setError","_useState7","_useState8","isLoggingIn","setIsLoggingIn","navigate","useNavigate","useEffect","console","warn","connectionCheck","setInterval","Meteor","status","connected","includes","clearInterval","handleLogin","_callee","e","_regeneratorRuntime","async","_callee$","_context","prev","next","preventDefault","abrupt","awrap","Promise","resolve","reject","loginWithPassword","err","Session","set","t0","reason","finish","stop","React","createElement","className","onSubmit","htmlFor","FiMail","id","type","required","value","onChange","target","placeholder","autoComplete","FiLock","maxLength","minLength","pattern","inputMode","disabled","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d","_c","$RefreshReg$","call","module"],"sources":["imports/ui/Login.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FiMail, FiLock } from 'react-icons/fi';\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nexport const LoginPage = ({ deviceDetails }) => {\n  const [email, setEmail] = useState('');\n  const [pin, setPin] = useState('');\n  const [error, setError] = useState('');\n  const [isLoggingIn, setIsLoggingIn] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Check for device details on component mount\n    if (!deviceDetails) {\n      console.warn('No device details available');\n    }\n\n    // Check for Meteor connection\n    const connectionCheck = setInterval(() => {\n      if (!Meteor.status().connected) {\n        setError('Connection to server lost. Attempting to reconnect...');\n      } else if (error.includes('Connection to server lost')) {\n        setError('');\n      }\n    }, 3000);\n\n    return () => clearInterval(connectionCheck);\n  }, [deviceDetails, error]);\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    \n    // Validate device details\n    if (!deviceDetails) {\n      setError('Device information not available. Please refresh the page.');\n      return;\n    }\n\n    // Validate connection\n    if (!Meteor.status().connected) {\n      setError('Unable to connect to server. Please check your connection.');\n      return;\n    }\n\n    setIsLoggingIn(true);\n    setError('');\n\n    try {\n      await new Promise((resolve, reject) => {\n        Meteor.loginWithPassword(email, pin, (err) => {\n          if (err) {\n            console.error('Login Error:', err);\n            reject(err);\n          } else {\n            resolve();\n          }\n        });\n      });\n      Session.set('userProfile', {\n        email: email,\n      });\n\n      navigate('/dashboard');\n\n      \n    } catch (err) {\n      setError(err.reason || 'Login failed. Please try again.');\n    } finally {\n      setIsLoggingIn(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col items-center justify-center p-4 bg-gray-50\">\n      <div className=\"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-lg\">\n        <div className=\"text-center\">\n          <h2 className=\"text-3xl font-bold text-gray-900\">Welcome Back</h2>\n          <p className=\"mt-2 text-gray-600\">Sign in to your account</p>\n        </div>\n\n        <form onSubmit={handleLogin} className=\"space-y-6\">\n          {error && (\n            <div className=\"text-red-600 text-sm text-center bg-red-100 p-3 rounded-lg\">\n              {error}\n            </div>\n          )}\n\n          <div>\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\n              Email\n            </label>\n            <div className=\"mt-1 relative\">\n              <FiMail className=\"absolute top-3 left-3 text-gray-400\" />\n              <input\n                id=\"email\"\n                type=\"email\"\n                required\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                placeholder=\"Enter your email\"\n                autoComplete=\"email\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label htmlFor=\"pin\" className=\"block text-sm font-medium text-gray-700\">\n              PIN\n            </label>\n            <div className=\"mt-1 relative\">\n              <FiLock className=\"absolute top-3 left-3 text-gray-400\" />\n              <input\n                id=\"pin\"\n                type=\"password\"\n                required\n                value={pin}\n                onChange={(e) => setPin(e.target.value)}\n                className=\"w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                placeholder=\"Enter your PIN\"\n                maxLength={6}\n                minLength={4}\n                pattern=\"[0-9]*\"\n                inputMode=\"numeric\"\n                autoComplete=\"current-password\"\n              />\n            </div>\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={isLoggingIn}\n            className=\"w-full py-3 px-4 rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 ease-in-out transform hover:scale-[1.02]\"\n          >\n            {isLoggingIn ? (\n              <div className=\"flex items-center justify-center\">\n                <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                </svg>\n                Signing In...\n              </div>\n            ) : (\n              'Sign In'\n            )}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"b742fbad0c687d369dea3126dc019a7d18b80206"}
