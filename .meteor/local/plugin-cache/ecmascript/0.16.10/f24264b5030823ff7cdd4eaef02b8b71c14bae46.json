{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/anshul/Masters/Internship/POC/Meteor_Mobile/mieweb_push_auth/imports/ui/Registration.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"imports/ui/Registration.jsx","filename":"/Users/anshul/Masters/Internship/POC/Meteor_Mobile/mieweb_push_auth/imports/ui/Registration.jsx","inputSourceMap":{"version":3,"names":["React","useState","useNavigate","FiUser","FiMail","FiLock","motion","Meteor","Session","RegistrationPage","deviceDetails","_s","formData","setFormData","email","firstName","lastName","pin","loading","setLoading","navigate","handleSubmit","e","preventDefault","alert","sessionDeviceInfo","get","fcmDeviceToken","uuid","Promise","resolve","reject","call","err","result","console","error","log","reason","inputFields","name","icon","type","placeholder","minLength","maxLength","pattern","opacity","y","delay","map","field","index","x","charAt","toUpperCase","slice","prev","target","value","scale","_c","$RefreshReg$"],"sources":["imports/ui/Registration.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FiUser, FiMail, FiLock } from 'react-icons/fi';\nimport { motion } from 'framer-motion';\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nexport const RegistrationPage = ({ deviceDetails }) => {\n  const [formData, setFormData] = useState({\n    email: '', firstName: '', lastName: '', pin: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!deviceDetails) {\n      alert('Device information not available');\n      return;\n    }\n\n    setLoading(true);\n    const sessionDeviceInfo = Session.get('capturedDeviceInfo');\n    const fcmDeviceToken = Session.get('deviceToken'); // Get FCM token from session\n\n    if (sessionDeviceInfo.uuid === deviceDetails) {\n      try {\n        // First register the user with deviceInfo\n        await new Promise((resolve, reject) => {\n          Meteor.call('users.register', \n            { \n              ...formData,\n              sessionDeviceInfo, fcmDeviceToken\n            }, \n            (err, result) => {\n              if (err) {\n                console.error(\"Registration error:\", err);\n                reject(err);\n              } else {\n                console.log(\"Registration success:\", result);\n                resolve(result);\n              }\n            }\n          );\n        });\n\n        // Navigate to login after successful registration\n        navigate('/login');\n      } catch (err) {\n        console.error('Registration failed:', err);\n        alert(err.reason || 'Registration failed. Please try again.');\n      } finally {\n        setLoading(false);\n      }\n\n    } else {\n      alert('Registration failed. Device uuid is not matched or tampered.');\n      setLoading(false);\n    }\n  };\n\n  const inputFields = [\n    { name: 'email', icon: FiMail, type: 'email', placeholder: 'Enter your email' },\n    { name: 'firstName', icon: FiUser, type: 'text', placeholder: 'First Name' },\n    { name: 'lastName', icon: FiUser, type: 'text', placeholder: 'Last Name' },\n    { \n      name: 'pin', \n      icon: FiLock, \n      type: 'password', \n      placeholder: 'Create a PIN (4-6 digits)',\n      minLength: \"4\",\n      maxLength: \"6\",\n      pattern: \"\\\\d*\"\n    }\n  ];\n\n  return (\n    <motion.div \n      initial={{ opacity: 0 }} \n      animate={{ opacity: 1 }}\n      className=\"min-h-screen flex flex-col items-center justify-center p-4\"\n    >\n\n      <motion.div\n        initial={{ y: 20, opacity: 0 }}\n        animate={{ y: 0, opacity: 1 }}\n        transition={{ delay: 0.2 }}\n        className=\"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-lg\"\n      >\n        <div className=\"text-center space-y-2\">\n          <motion.h2 \n            initial={{ y: -20 }}\n            animate={{ y: 0 }}\n            className=\"text-3xl font-bold text-gray-900\"\n          >\n            Create Account\n          </motion.h2>\n          <p className=\"text-gray-600\">Join our community today</p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {inputFields.map((field, index) => (\n              <motion.div\n                key={field.name}\n                initial={{ x: -20, opacity: 0 }}\n                animate={{ x: 0, opacity: 1 }}\n                transition={{ delay: index * 0.1 }}\n                className={field.name === 'email' ? 'md:col-span-2' : ''}\n              >\n                <label className=\"text-sm font-medium text-gray-700\">\n                  {field.name.charAt(0).toUpperCase() + field.name.slice(1)}\n                </label>\n                <div className=\"mt-1 relative\">\n                  <field.icon className=\"absolute top-3 left-3 text-gray-400\" />\n                  <input\n                    {...field}\n                    required\n                    value={formData[field.name]}\n                    onChange={e => setFormData(prev => ({\n                      ...prev,\n                      [e.target.name]: e.target.value\n                    }))}\n                    className=\"w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n              </motion.div>\n            ))}\n          </div>\n\n          <motion.button\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full py-3 px-4 rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 transition-colors\"\n          >\n            {loading ? 'Creating Account...' : 'Create Account'}\n          </motion.button>\n        </form>\n      </motion.div>\n    </motion.div>\n  );\n};"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,MAAM,EAAEC,MAAM,EAAEC,MAAM,QAAQ,gBAAgB;AACvD,SAASC,MAAM,QAAQ,eAAe;AACtC,SAASC,MAAM,QAAQ,eAAe;AACtC,SAASC,OAAO,QAAQ,gBAAgB;AAExC,OAAO,MAAMC,gBAAgB,GAAGA,CAAC;EAAEC;AAAc,CAAC,KAAK;EAAAC,EAAA;EACrD,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGZ,QAAQ,CAAC;IACvCa,KAAK,EAAE,EAAE;IAAEC,SAAS,EAAE,EAAE;IAAEC,QAAQ,EAAE,EAAE;IAAEC,GAAG,EAAE;EAC/C,CAAC,CAAC;EACF,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAMmB,QAAQ,GAAGlB,WAAW,CAAC,CAAC;EAE9B,MAAMmB,YAAY,GAAG,MAAOC,CAAC,IAAK;IAChCA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAI,CAACb,aAAa,EAAE;MAClBc,KAAK,CAAC,kCAAkC,CAAC;MACzC;IACF;IAEAL,UAAU,CAAC,IAAI,CAAC;IAChB,MAAMM,iBAAiB,GAAGjB,OAAO,CAACkB,GAAG,CAAC,oBAAoB,CAAC;IAC3D,MAAMC,cAAc,GAAGnB,OAAO,CAACkB,GAAG,CAAC,aAAa,CAAC,CAAC,CAAC;;IAEnD,IAAID,iBAAiB,CAACG,IAAI,KAAKlB,aAAa,EAAE;MAC5C,IAAI;QACF;QACA,MAAM,IAAImB,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;UACrCxB,MAAM,CAACyB,IAAI,CAAC,gBAAgB,EAC1B;YACE,GAAGpB,QAAQ;YACXa,iBAAiB;YAAEE;UACrB,CAAC,EACD,CAACM,GAAG,EAAEC,MAAM,KAAK;YACf,IAAID,GAAG,EAAE;cACPE,OAAO,CAACC,KAAK,CAAC,qBAAqB,EAAEH,GAAG,CAAC;cACzCF,MAAM,CAACE,GAAG,CAAC;YACb,CAAC,MAAM;cACLE,OAAO,CAACE,GAAG,CAAC,uBAAuB,EAAEH,MAAM,CAAC;cAC5CJ,OAAO,CAACI,MAAM,CAAC;YACjB;UACF,CACF,CAAC;QACH,CAAC,CAAC;;QAEF;QACAd,QAAQ,CAAC,QAAQ,CAAC;MACpB,CAAC,CAAC,OAAOa,GAAG,EAAE;QACZE,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEH,GAAG,CAAC;QAC1CT,KAAK,CAACS,GAAG,CAACK,MAAM,IAAI,wCAAwC,CAAC;MAC/D,CAAC,SAAS;QACRnB,UAAU,CAAC,KAAK,CAAC;MACnB;IAEF,CAAC,MAAM;MACLK,KAAK,CAAC,8DAA8D,CAAC;MACrEL,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMoB,WAAW,GAAG,CAClB;IAAEC,IAAI,EAAE,OAAO;IAAEC,IAAI,EAAErC,MAAM;IAAEsC,IAAI,EAAE,OAAO;IAAEC,WAAW,EAAE;EAAmB,CAAC,EAC/E;IAAEH,IAAI,EAAE,WAAW;IAAEC,IAAI,EAAEtC,MAAM;IAAEuC,IAAI,EAAE,MAAM;IAAEC,WAAW,EAAE;EAAa,CAAC,EAC5E;IAAEH,IAAI,EAAE,UAAU;IAAEC,IAAI,EAAEtC,MAAM;IAAEuC,IAAI,EAAE,MAAM;IAAEC,WAAW,EAAE;EAAY,CAAC,EAC1E;IACEH,IAAI,EAAE,KAAK;IACXC,IAAI,EAAEpC,MAAM;IACZqC,IAAI,EAAE,UAAU;IAChBC,WAAW,EAAE,2BAA2B;IACxCC,SAAS,EAAE,GAAG;IACdC,SAAS,EAAE,GAAG;IACdC,OAAO,EAAE;EACX,CAAC,CACF;EAED,OACE,CAAC,MAAM,CAAC,GAAG,CACT,OAAO,CAAC,CAAC;IAAEC,OAAO,EAAE;EAAE,CAAC,CAAC,CACxB,OAAO,CAAC,CAAC;IAAEA,OAAO,EAAE;EAAE,CAAC,CAAC,CACxB,SAAS,CAAC,4DAA4D;AAE5E;AACA,MAAM,CAAC,MAAM,CAAC,GAAG,CACT,OAAO,CAAC,CAAC;MAAEC,CAAC,EAAE,EAAE;MAAED,OAAO,EAAE;IAAE,CAAC,CAAC,CAC/B,OAAO,CAAC,CAAC;MAAEC,CAAC,EAAE,CAAC;MAAED,OAAO,EAAE;IAAE,CAAC,CAAC,CAC9B,UAAU,CAAC,CAAC;MAAEE,KAAK,EAAE;IAAI,CAAC,CAAC,CAC3B,SAAS,CAAC,8DAA8D;AAEhF,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,uBAAuB;AAC9C,UAAU,CAAC,MAAM,CAAC,EAAE,CACR,OAAO,CAAC,CAAC;UAAED,CAAC,EAAE,CAAC;QAAG,CAAC,CAAC,CACpB,OAAO,CAAC,CAAC;UAAEA,CAAC,EAAE;QAAE,CAAC,CAAC,CAClB,SAAS,CAAC,kCAAkC;AAExD;AACA,UAAU,EAAE,MAAM,CAAC,EAAE;AACrB,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC,eAAe,CAAC,wBAAwB,EAAE,CAAC;AAClE,QAAQ,EAAE,GAAG;AACb;AACA,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC3B,YAAY,CAAC,CAAC,SAAS,CAAC,WAAW;AAC3D,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC,uCAAuC;AAChE,YAAY,CAACkB,WAAW,CAACW,GAAG,CAAC,CAACC,KAAK,EAAEC,KAAK,KAC5B,CAAC,MAAM,CAAC,GAAG,CACT,GAAG,CAAC,CAACD,KAAK,CAACX,IAAI,CAAC,CAChB,OAAO,CAAC,CAAC;YAAEa,CAAC,EAAE,CAAC,EAAE;YAAEN,OAAO,EAAE;UAAE,CAAC,CAAC,CAChC,OAAO,CAAC,CAAC;YAAEM,CAAC,EAAE,CAAC;YAAEN,OAAO,EAAE;UAAE,CAAC,CAAC,CAC9B,UAAU,CAAC,CAAC;YAAEE,KAAK,EAAEG,KAAK,GAAG;UAAI,CAAC,CAAC,CACnC,SAAS,CAAC,CAACD,KAAK,CAACX,IAAI,KAAK,OAAO,GAAG,eAAe,GAAG,EAAE,CAAC;AAEzE,gBAAgB,CAAC,KAAK,CAAC,SAAS,CAAC,mCAAmC;AACpE,kBAAkB,CAACW,KAAK,CAACX,IAAI,CAACc,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGJ,KAAK,CAACX,IAAI,CAACgB,KAAK,CAAC,CAAC,CAAC;AAC3E,gBAAgB,EAAE,KAAK;AACvB,gBAAgB,CAAC,GAAG,CAAC,SAAS,CAAC,eAAe;AAC9C,kBAAkB,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,qCAAqC;AAC7E,kBAAkB,CAAC,KAAK,CACJ,IAAIL,KAAK,CAAC,CACV,QAAQ,CACR,KAAK,CAAC,CAACvC,QAAQ,CAACuC,KAAK,CAACX,IAAI,CAAC,CAAC,CAC5B,QAAQ,CAAC,CAAClB,CAAC,IAAIT,WAAW,CAAC4C,IAAI,KAAK;gBAClC,GAAGA,IAAI;gBACP,CAACnC,CAAC,CAACoC,MAAM,CAAClB,IAAI,GAAGlB,CAAC,CAACoC,MAAM,CAACC;cAC5B,CAAC,CAAC,CAAC,CAAC,CACJ,SAAS,CAAC,2EAA2E;AAEzG,gBAAgB,EAAE,GAAG;AACrB,cAAc,EAAE,MAAM,CAAC,GAAG,CACb,CAAC;AACd,UAAU,EAAE,GAAG;AACf;AACA,UAAU,CAAC,MAAM,CAAC,MAAM,CACZ,UAAU,CAAC,CAAC;UAAEC,KAAK,EAAE;QAAK,CAAC,CAAC,CAC5B,QAAQ,CAAC,CAAC;UAAEA,KAAK,EAAE;QAAK,CAAC,CAAC,CAC1B,IAAI,CAAC,QAAQ,CACb,QAAQ,CAAC,CAAC1C,OAAO,CAAC,CAClB,SAAS,CAAC,mKAAmK;AAEzL,YAAY,CAACA,OAAO,GAAG,qBAAqB,GAAG,gBAAgB;AAC/D,UAAU,EAAE,MAAM,CAAC,MAAM;AACzB,QAAQ,EAAE,IAAI;AACd,MAAM,EAAE,MAAM,CAAC,GAAG;AAClB,IAAI,EAAE,MAAM,CAAC,GAAG,CAAC;AAEjB,CAAC;AAACP,EAAA,CAxIWF,gBAAgB;EAAA,QAKVP,WAAW;AAAA;AAAA2D,EAAA,GALjBpD,gBAAgB;AAAA,IAAAoD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/anshul/Masters/Internship/POC/Meteor_Mobile/mieweb_push_auth","root":"/Users/anshul/Masters/Internship/POC/Meteor_Mobile/mieweb_push_auth","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]}},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/anshul/Masters/Internship/POC/Meteor_Mobile/mieweb_push_auth/imports/ui/Registration.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/Registration.jsx","inputSourceMap":{"version":3,"names":["React","useState","useNavigate","FiUser","FiMail","FiLock","motion","Meteor","Session","RegistrationPage","deviceDetails","_s","formData","setFormData","email","firstName","lastName","pin","loading","setLoading","navigate","handleSubmit","e","preventDefault","alert","sessionDeviceInfo","get","fcmDeviceToken","uuid","Promise","resolve","reject","call","err","result","console","error","log","reason","inputFields","name","icon","type","placeholder","minLength","maxLength","pattern","opacity","y","delay","map","field","index","x","charAt","toUpperCase","slice","prev","target","value","scale","_c","$RefreshReg$"],"sources":["imports/ui/Registration.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FiUser, FiMail, FiLock } from 'react-icons/fi';\nimport { motion } from 'framer-motion';\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nexport const RegistrationPage = ({ deviceDetails }) => {\n  const [formData, setFormData] = useState({\n    email: '', firstName: '', lastName: '', pin: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!deviceDetails) {\n      alert('Device information not available');\n      return;\n    }\n\n    setLoading(true);\n    const sessionDeviceInfo = Session.get('capturedDeviceInfo');\n    const fcmDeviceToken = Session.get('deviceToken'); // Get FCM token from session\n\n    if (sessionDeviceInfo.uuid === deviceDetails) {\n      try {\n        // First register the user with deviceInfo\n        await new Promise((resolve, reject) => {\n          Meteor.call('users.register', \n            { \n              ...formData,\n              sessionDeviceInfo, fcmDeviceToken\n            }, \n            (err, result) => {\n              if (err) {\n                console.error(\"Registration error:\", err);\n                reject(err);\n              } else {\n                console.log(\"Registration success:\", result);\n                resolve(result);\n              }\n            }\n          );\n        });\n\n        // Navigate to login after successful registration\n        navigate('/login');\n      } catch (err) {\n        console.error('Registration failed:', err);\n        alert(err.reason || 'Registration failed. Please try again.');\n      } finally {\n        setLoading(false);\n      }\n\n    } else {\n      alert('Registration failed. Device uuid is not matched or tampered.');\n      setLoading(false);\n    }\n  };\n\n  const inputFields = [\n    { name: 'email', icon: FiMail, type: 'email', placeholder: 'Enter your email' },\n    { name: 'firstName', icon: FiUser, type: 'text', placeholder: 'First Name' },\n    { name: 'lastName', icon: FiUser, type: 'text', placeholder: 'Last Name' },\n    { \n      name: 'pin', \n      icon: FiLock, \n      type: 'password', \n      placeholder: 'Create a PIN (4-6 digits)',\n      minLength: \"4\",\n      maxLength: \"6\",\n      pattern: \"\\\\d*\"\n    }\n  ];\n\n  return (\n    <motion.div \n      initial={{ opacity: 0 }} \n      animate={{ opacity: 1 }}\n      className=\"min-h-screen flex flex-col items-center justify-center p-4\"\n    >\n\n      <motion.div\n        initial={{ y: 20, opacity: 0 }}\n        animate={{ y: 0, opacity: 1 }}\n        transition={{ delay: 0.2 }}\n        className=\"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-lg\"\n      >\n        <div className=\"text-center space-y-2\">\n          <motion.h2 \n            initial={{ y: -20 }}\n            animate={{ y: 0 }}\n            className=\"text-3xl font-bold text-gray-900\"\n          >\n            Create Account\n          </motion.h2>\n          <p className=\"text-gray-600\">Join our community today</p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {inputFields.map((field, index) => (\n              <motion.div\n                key={field.name}\n                initial={{ x: -20, opacity: 0 }}\n                animate={{ x: 0, opacity: 1 }}\n                transition={{ delay: index * 0.1 }}\n                className={field.name === 'email' ? 'md:col-span-2' : ''}\n              >\n                <label className=\"text-sm font-medium text-gray-700\">\n                  {field.name.charAt(0).toUpperCase() + field.name.slice(1)}\n                </label>\n                <div className=\"mt-1 relative\">\n                  <field.icon className=\"absolute top-3 left-3 text-gray-400\" />\n                  <input\n                    {...field}\n                    required\n                    value={formData[field.name]}\n                    onChange={e => setFormData(prev => ({\n                      ...prev,\n                      [e.target.name]: e.target.value\n                    }))}\n                    className=\"w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n              </motion.div>\n            ))}\n          </div>\n\n          <motion.button\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full py-3 px-4 rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 transition-colors\"\n          >\n            {loading ? 'Creating Account...' : 'Create Account'}\n          </motion.button>\n        </form>\n      </motion.div>\n    </motion.div>\n  );\n};"],"mappings":"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","ignoreList":[]}}},"code":"!function (module1) {\n  var _regeneratorRuntime;\n  module1.link(\"@babel/runtime/regenerator\", {\n    default: function (v) {\n      _regeneratorRuntime = v;\n    }\n  }, 0);\n  var _extends;\n  module1.link(\"@babel/runtime/helpers/extends\", {\n    default: function (v) {\n      _extends = v;\n    }\n  }, 1);\n  var _objectSpread;\n  module1.link(\"@babel/runtime/helpers/objectSpread2\", {\n    default: function (v) {\n      _objectSpread = v;\n    }\n  }, 2);\n  var _slicedToArray;\n  module1.link(\"@babel/runtime/helpers/slicedToArray\", {\n    default: function (v) {\n      _slicedToArray = v;\n    }\n  }, 3);\n  module1.export({\n    RegistrationPage: function () {\n      return RegistrationPage;\n    }\n  });\n  var React, useState;\n  module1.link(\"react\", {\n    \"default\": function (v) {\n      React = v;\n    },\n    useState: function (v) {\n      useState = v;\n    }\n  }, 0);\n  var useNavigate;\n  module1.link(\"react-router-dom\", {\n    useNavigate: function (v) {\n      useNavigate = v;\n    }\n  }, 1);\n  var FiUser, FiMail, FiLock;\n  module1.link(\"react-icons/fi\", {\n    FiUser: function (v) {\n      FiUser = v;\n    },\n    FiMail: function (v) {\n      FiMail = v;\n    },\n    FiLock: function (v) {\n      FiLock = v;\n    }\n  }, 2);\n  var motion;\n  module1.link(\"framer-motion\", {\n    motion: function (v) {\n      motion = v;\n    }\n  }, 3);\n  var Meteor;\n  module1.link(\"meteor/meteor\", {\n    Meteor: function (v) {\n      Meteor = v;\n    }\n  }, 4);\n  var Session;\n  module1.link(\"meteor/session\", {\n    Session: function (v) {\n      Session = v;\n    }\n  }, 5);\n  ___INIT_METEOR_FAST_REFRESH(module);\n  var _s = $RefreshSig$();\n  var RegistrationPage = function (_ref) {\n    var deviceDetails = _ref.deviceDetails;\n    _s();\n    var _useState = useState({\n        email: '',\n        firstName: '',\n        lastName: '',\n        pin: ''\n      }),\n      _useState2 = _slicedToArray(_useState, 2),\n      formData = _useState2[0],\n      setFormData = _useState2[1];\n    var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n    var navigate = useNavigate();\n    var handleSubmit = function () {\n      function _callee(e) {\n        var sessionDeviceInfo, fcmDeviceToken;\n        return _regeneratorRuntime.async(function () {\n          function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                if (deviceDetails) {\n                  _context.next = 4;\n                  break;\n                }\n                alert('Device information not available');\n                return _context.abrupt(\"return\");\n              case 4:\n                setLoading(true);\n                sessionDeviceInfo = Session.get('capturedDeviceInfo');\n                fcmDeviceToken = Session.get('deviceToken'); // Get FCM token from session\n                if (!(sessionDeviceInfo.uuid === deviceDetails)) {\n                  _context.next = 23;\n                  break;\n                }\n                _context.prev = 8;\n                _context.next = 11;\n                return _regeneratorRuntime.awrap(new Promise(function (resolve, reject) {\n                  Meteor.call('users.register', _objectSpread(_objectSpread({}, formData), {}, {\n                    sessionDeviceInfo: sessionDeviceInfo,\n                    fcmDeviceToken: fcmDeviceToken\n                  }), function (err, result) {\n                    if (err) {\n                      console.error(\"Registration error:\", err);\n                      reject(err);\n                    } else {\n                      console.log(\"Registration success:\", result);\n                      resolve(result);\n                    }\n                  });\n                }));\n              case 11:\n                // Navigate to login after successful registration\n                navigate('/login');\n                _context.next = 18;\n                break;\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](8);\n                console.error('Registration failed:', _context.t0);\n                alert(_context.t0.reason || 'Registration failed. Please try again.');\n              case 18:\n                _context.prev = 18;\n                setLoading(false);\n                return _context.finish(18);\n              case 21:\n                _context.next = 25;\n                break;\n              case 23:\n                alert('Registration failed. Device uuid is not matched or tampered.');\n                setLoading(false);\n              case 25:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n          return _callee$;\n        }(), null, null, [[8, 14, 18, 21]], Promise);\n      }\n      return _callee;\n    }();\n    var inputFields = [{\n      name: 'email',\n      icon: FiMail,\n      type: 'email',\n      placeholder: 'Enter your email'\n    }, {\n      name: 'firstName',\n      icon: FiUser,\n      type: 'text',\n      placeholder: 'First Name'\n    }, {\n      name: 'lastName',\n      icon: FiUser,\n      type: 'text',\n      placeholder: 'Last Name'\n    }, {\n      name: 'pin',\n      icon: FiLock,\n      type: 'password',\n      placeholder: 'Create a PIN (4-6 digits)',\n      minLength: \"4\",\n      maxLength: \"6\",\n      pattern: \"\\\\d*\"\n    }];\n    return /*#__PURE__*/React.createElement(motion.div, {\n      initial: {\n        opacity: 0\n      },\n      animate: {\n        opacity: 1\n      },\n      className: \"min-h-screen flex flex-col items-center justify-center p-4\"\n    }, /*#__PURE__*/React.createElement(motion.div, {\n      initial: {\n        y: 20,\n        opacity: 0\n      },\n      animate: {\n        y: 0,\n        opacity: 1\n      },\n      transition: {\n        delay: 0.2\n      },\n      className: \"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-lg\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center space-y-2\"\n    }, /*#__PURE__*/React.createElement(motion.h2, {\n      initial: {\n        y: -20\n      },\n      animate: {\n        y: 0\n      },\n      className: \"text-3xl font-bold text-gray-900\"\n    }, \"Create Account\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-gray-600\"\n    }, \"Join our community today\")), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"space-y-6\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-4\"\n    }, inputFields.map(function (field, index) {\n      return /*#__PURE__*/React.createElement(motion.div, {\n        key: field.name,\n        initial: {\n          x: -20,\n          opacity: 0\n        },\n        animate: {\n          x: 0,\n          opacity: 1\n        },\n        transition: {\n          delay: index * 0.1\n        },\n        className: field.name === 'email' ? 'md:col-span-2' : ''\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"text-sm font-medium text-gray-700\"\n      }, field.name.charAt(0).toUpperCase() + field.name.slice(1)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mt-1 relative\"\n      }, /*#__PURE__*/React.createElement(field.icon, {\n        className: \"absolute top-3 left-3 text-gray-400\"\n      }), /*#__PURE__*/React.createElement(\"input\", _extends({}, field, {\n        required: true,\n        value: formData[field.name],\n        onChange: function (e) {\n          return setFormData(function (prev) {\n            var _objectSpread2;\n            return _objectSpread(_objectSpread({}, prev), {}, (_objectSpread2 = {}, _objectSpread2[e.target.name] = e.target.value, _objectSpread2));\n          });\n        },\n        className: \"w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500\"\n      }))));\n    })), /*#__PURE__*/React.createElement(motion.button, {\n      whileHover: {\n        scale: 1.02\n      },\n      whileTap: {\n        scale: 0.98\n      },\n      type: \"submit\",\n      disabled: loading,\n      className: \"w-full py-3 px-4 rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 transition-colors\"\n    }, loading ? 'Creating Account...' : 'Create Account'))));\n  };\n  _s(RegistrationPage, \"fH7r+AjIZkvWjag6Zube6/X3748=\", false, function () {\n    return [useNavigate];\n  });\n  _c = RegistrationPage;\n  var _c;\n  $RefreshReg$(_c, \"RegistrationPage\");\n}.call(this, module);","map":{"version":3,"names":["RegistrationPage","_ref","deviceDetails","_s","_useState","useState","email","firstName","lastName","pin","_useState2","_slicedToArray","formData","setFormData","_useState3","_useState4","loading","setLoading","navigate","useNavigate","handleSubmit","_callee","e","sessionDeviceInfo","fcmDeviceToken","_regeneratorRuntime","async","_callee$","_context","prev","next","preventDefault","alert","abrupt","Session","get","uuid","awrap","Promise","resolve","reject","Meteor","call","_objectSpread","err","result","console","error","log","t0","reason","finish","stop","inputFields","name","icon","FiMail","type","placeholder","FiUser","FiLock","minLength","maxLength","pattern","React","createElement","motion","div","initial","opacity","animate","className","y","transition","delay","h2","onSubmit","map","field","index","key","x","charAt","toUpperCase","slice","_extends","required","value","onChange","_objectSpread2","target","button","whileHover","scale","whileTap","disabled","_c","$RefreshReg$","module"],"sources":["imports/ui/Registration.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FiUser, FiMail, FiLock } from 'react-icons/fi';\nimport { motion } from 'framer-motion';\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nexport const RegistrationPage = ({ deviceDetails }) => {\n  const [formData, setFormData] = useState({\n    email: '', firstName: '', lastName: '', pin: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!deviceDetails) {\n      alert('Device information not available');\n      return;\n    }\n\n    setLoading(true);\n    const sessionDeviceInfo = Session.get('capturedDeviceInfo');\n    const fcmDeviceToken = Session.get('deviceToken'); // Get FCM token from session\n\n    if (sessionDeviceInfo.uuid === deviceDetails) {\n      try {\n        // First register the user with deviceInfo\n        await new Promise((resolve, reject) => {\n          Meteor.call('users.register', \n            { \n              ...formData,\n              sessionDeviceInfo, fcmDeviceToken\n            }, \n            (err, result) => {\n              if (err) {\n                console.error(\"Registration error:\", err);\n                reject(err);\n              } else {\n                console.log(\"Registration success:\", result);\n                resolve(result);\n              }\n            }\n          );\n        });\n\n        // Navigate to login after successful registration\n        navigate('/login');\n      } catch (err) {\n        console.error('Registration failed:', err);\n        alert(err.reason || 'Registration failed. Please try again.');\n      } finally {\n        setLoading(false);\n      }\n\n    } else {\n      alert('Registration failed. Device uuid is not matched or tampered.');\n      setLoading(false);\n    }\n  };\n\n  const inputFields = [\n    { name: 'email', icon: FiMail, type: 'email', placeholder: 'Enter your email' },\n    { name: 'firstName', icon: FiUser, type: 'text', placeholder: 'First Name' },\n    { name: 'lastName', icon: FiUser, type: 'text', placeholder: 'Last Name' },\n    { \n      name: 'pin', \n      icon: FiLock, \n      type: 'password', \n      placeholder: 'Create a PIN (4-6 digits)',\n      minLength: \"4\",\n      maxLength: \"6\",\n      pattern: \"\\\\d*\"\n    }\n  ];\n\n  return (\n    <motion.div \n      initial={{ opacity: 0 }} \n      animate={{ opacity: 1 }}\n      className=\"min-h-screen flex flex-col items-center justify-center p-4\"\n    >\n\n      <motion.div\n        initial={{ y: 20, opacity: 0 }}\n        animate={{ y: 0, opacity: 1 }}\n        transition={{ delay: 0.2 }}\n        className=\"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-lg\"\n      >\n        <div className=\"text-center space-y-2\">\n          <motion.h2 \n            initial={{ y: -20 }}\n            animate={{ y: 0 }}\n            className=\"text-3xl font-bold text-gray-900\"\n          >\n            Create Account\n          </motion.h2>\n          <p className=\"text-gray-600\">Join our community today</p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {inputFields.map((field, index) => (\n              <motion.div\n                key={field.name}\n                initial={{ x: -20, opacity: 0 }}\n                animate={{ x: 0, opacity: 1 }}\n                transition={{ delay: index * 0.1 }}\n                className={field.name === 'email' ? 'md:col-span-2' : ''}\n              >\n                <label className=\"text-sm font-medium text-gray-700\">\n                  {field.name.charAt(0).toUpperCase() + field.name.slice(1)}\n                </label>\n                <div className=\"mt-1 relative\">\n                  <field.icon className=\"absolute top-3 left-3 text-gray-400\" />\n                  <input\n                    {...field}\n                    required\n                    value={formData[field.name]}\n                    onChange={e => setFormData(prev => ({\n                      ...prev,\n                      [e.target.name]: e.target.value\n                    }))}\n                    className=\"w-full pl-10 pr-4 py-2 border rounded-xl focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n              </motion.div>\n            ))}\n          </div>\n\n          <motion.button\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full py-3 px-4 rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 transition-colors\"\n          >\n            {loading ? 'Creating Account...' : 'Create Account'}\n          </motion.button>\n        </form>\n      </motion.div>\n    </motion.div>\n  );\n};"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"f24264b5030823ff7cdd4eaef02b8b71c14bae46"}
